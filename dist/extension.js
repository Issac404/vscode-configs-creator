"use strict";var M=Object.create;var d=Object.defineProperty;var $=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var N=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty;var S=(e,s)=>{for(var n in s)d(e,n,{get:s[n],enumerable:!0})},x=(e,s,n,l)=>{if(s&&typeof s=="object"||typeof s=="function")for(let i of k(s))!F.call(e,i)&&i!==n&&d(e,i,{get:()=>s[i],enumerable:!(l=$(s,i))||l.enumerable});return e};var v=(e,s,n)=>(n=e!=null?M(N(e)):{},x(s||!e||!e.__esModule?d(n,"default",{value:e,enumerable:!0}):n,e)),j=e=>x(d({},"__esModule",{value:!0}),e);var P={};S(P,{activate:()=>E,deactivate:()=>T});module.exports=j(P);var o=v(require("vscode")),r=v(require("fs")),g=v(require("path"));function E(e){let s=o.commands.registerCommand("extension.cfgCreator",async()=>{let n=o.workspace.workspaceFolders;if(!n||n.length===0){o.window.showErrorMessage("\u8BF7\u5148\u6253\u5F00\u4E00\u4E2A\u5DE5\u4F5C\u533A");return}let l=n[0].uri.fsPath,i=g.join(l,".vscode");try{let a=o.workspace.getConfiguration("cfgCreator"),m=[];for(let t=1;t<=5;t++){let c=a.get(`template${t}.fileName`,"").trim(),f=a.get(`template${t}.content`,"");c&&f&&m.push({fileName:c,content:f})}if(m.length===0){o.window.showWarningMessage("\u8BF7\u5148\u5728\u8BBE\u7F6E\u4E2D\u914D\u7F6E\u6A21\u677F\u6587\u4EF6");return}r.existsSync(i)||(r.mkdirSync(i,{recursive:!0}),o.window.showInformationMessage("\u5DF2\u521B\u5EFA .vscode \u6587\u4EF6\u5939"));let w=[],p=[];for(let t of m){let c=g.join(i,t.fileName);r.existsSync(c)&&w.push(t.fileName),p.push(t)}if(p.length===0){o.window.showWarningMessage("\u6CA1\u6709\u6709\u6548\u7684\u6A21\u677F\u914D\u7F6E");return}let u=!0;w.length>0&&await o.window.showWarningMessage(`\u4EE5\u4E0B\u6587\u4EF6\u5DF2\u5B58\u5728: ${w.join(", ")}\u3002\u662F\u5426\u8986\u76D6\uFF1F`,"\u8986\u76D6","\u53D6\u6D88")!=="\u8986\u76D6"&&(u=!1);let y=0,h=0;for(let t of p){let c=g.join(i,t.fileName);if(r.existsSync(c)&&!u){h++;continue}try{r.writeFileSync(c,t.content,"utf8"),y++}catch(f){o.window.showErrorMessage(`\u521B\u5EFA\u6587\u4EF6 ${t.fileName} \u5931\u8D25: ${f.message||f}`)}}let C=`\u6210\u529F\u521B\u5EFA ${y} \u4E2A\u6587\u4EF6`;h>0&&(C+=`\uFF0C\u8DF3\u8FC7 ${h} \u4E2A\u6587\u4EF6`),o.window.showInformationMessage(C)}catch(a){o.window.showErrorMessage(`\u64CD\u4F5C\u5931\u8D25: ${a.message||a}`)}});e.subscriptions.push(s)}function T(){}0&&(module.exports={activate,deactivate});
